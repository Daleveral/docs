---
title: 比特币的算法原理
tags: [区块链, 密码学]
categories: [密码学]
date: 2024-10-11
description: 向河梁, 回头万里, 故人长绝. 易水萧萧西风冷, 满座衣冠似雪

---

<br/>

::: info Blockchain & Bitcoin
2008 年, 中本聪 ( Satoshi Nakamoto ) 发布白皮书, 区块链概念和比特币问世
:::
<br/>

::: info Decentralized
核心理念 : 去中心化
:::

<br/>
<br/>


## 比特币区块链原理 
- 区块链本质是一个去中心化的电子记账系统, 每个人能知道且记录系统内所有人的交易记录
- 以比特币为例, 账单被打包成区块, 每个区块能够存储约 4000 条交易记录, 把每个块按时间次序连接在一起
- 记账有奖励. 即 A 想要支付若干比特币给 B, 需要额外付出一些手续费作为他人记账的奖励
- 每 10 分钟打包一个区块, 打包区块也有奖励, 最早是 50 枚比特币, 此奖励每隔 4 年减半
- 理论上的打包奖励总额 :  $4\times365\times 24\times 6 \times 50\  \cdot (1+\frac{1}{2}+\left( \frac{1}{2} \right)^{2}+\left( \frac{1}{2} \right)^{3} +\ \dots\ )\approx\ 2102\ 4000$
- 打包必然会竞争, 获取打包资格必须要给出工作量证明, 即挖矿
- 每个包都有两部分 : 头部的散列值和记录的账单
- 挖矿需要设计一个字符串 S, 包含 : 前一个块的头部散列值 + 账单 + 自定义随机数 + 时间戳等其他信息 
- 计算散列值 **SHA256 ( SHA256 ( S ) )** ,  广播并接入区块链
- 若不满足前 n 位为 0 的要求, 则更改随机数重新打包, 直到符合要求或被其他人成功打包
- 系统需要根据矿机总量和算力来调整难度 n , 确保每 10 分钟出一个块 


<br/>

## 区块链的安全机制
  <font color = red>身份认证</font>
  - 基于随机数生成私钥, 公钥, 地址
  - 若 A 向 B 支付 10 枚比特币, 则 A 应广播信息 $A\stackrel{10 \ BTC}{\longrightarrow}B$ , 并且将 $Hash(\ A\stackrel{10 \ BTC}{\longrightarrow}B\ )$ 用私钥签名后广播
  - 记账者用 A 的公钥解出散列值, 自己也计算一遍  $Hash(\ A\stackrel{10 \ BTC}{\longrightarrow}B\ )$ , 若一致, 则完成身份认证

  <font color = orange>合法支付</font>
  - 若 A 声称向 B 支付 10 枚比特币, 则要追溯区块链上过往的账单, 判断 A 的余额是否能够满足支付
  - 一个支付行为完成的标志是被成功打包, 上传到区块链上, 未被打包的支付声明都是需要被怀疑的
  - 假设 A 余额只有 15 BTC, 企图玩双重支付, 同时广播 : $A\stackrel{10 \ BTC}{\longrightarrow}B$  和 : $A\stackrel{10 \ BTC}{\longrightarrow}C$ . 
	记账者查看余额, 只会将收到的第一个声明判断为有效, 第二个因余额不足被抛弃.
	直到某个人成功打包 $A\stackrel{10 \ BTC}{\longrightarrow}B$  或 $A\stackrel{10 \ BTC}{\longrightarrow}C$ , 那么一个支付行为完成, 另一个作废.
	所以 : A 的 10 枚 BTC 可能会流向 B , 也可能是 C, 完全看概率

  <font color = blue>防止篡改</font>
   - 最长链原则 : 多个记账者几乎同时打包成功, 则暂时允许这些包同时存在 ( 出现分支 )
	 其他记账者们会基于自己收到的第一条打包成功信息的对应分支来继续挖矿
	 某个分支上又成功出现了新的区块, 就会成为主流的链, 所有玩家都利用最长最新的链来挖矿, 其他分支作废
   - 如果某人希望强行抹除已有链中的某个块, 则需在它的前一个块上开辟分支
	 利用最快的挖矿速度赶超正统的链条, 理论上是可以做到的, 越早实施成功的可能性越高
	 但如果想要抹除的块已经存在很久了, 那这种行为就是挑战世界上所有其他挖矿者的设备算力总和, 非常不现实
	 大宗交易一般都有延后性, 当账单所在区块后已被链接 6 个区块时可以认为是非常安全了


<br/>

## 比特币的金融特征
- 高波动高收益
- 存量有限, 有一定保值性
- 回归相关性几乎为零
- 萨尔瓦多、古巴、中非和多米尼克已经将比特币纳为法币
- 目前 90% 的比特币已被开采

<br/>

## 交易所赚钱方式
![](https://dales-1320948803.cos.ap-beijing.myqcloud.com/cptcrc.png)

<br/>
<br/>
